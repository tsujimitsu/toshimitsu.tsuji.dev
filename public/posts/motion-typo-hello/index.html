<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="generator" content="Hugo 0.59.1" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="//fonts.googleapis.com/css?family=Roboto:400,700" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/github.min.css">
<link rel="stylesheet" href="/css/normalize.css">
<link rel="stylesheet" href="/css/skeleton.css">
<link rel="stylesheet" href="/css/custom.css">
<link rel="alternate" href="/index.xml" type="application/rss+xml" title="tsuji.dev">
<title>Motion Typo Hello - tsuji.dev</title>
</head>
<body>

<div class="container">

	<header role="banner">
		<div class="header-logo">
			<a href="/">tsuji.dev</a>
		</div>
		
	</header>

	<main role="main">
		<article itemscope itemtype="http://schema.org/BlogPosting">
			<h1 class="entry-title" itemprop="headline">Motion Typo Hello</h1>
			<span class="entry-meta"><time itemprop="datePublished" datetime="2017-09-18">September 18, 2017</time></span>
			<section itemprop="entry-text">
				<p></p>

<p><span id="hello" style="font-size:100px"></span></p>

<script>
/**
 * 定数の宣言
 */

// setTimeoutの秒数（言葉が変化する時間）
var CHANGE_SPEED = 10;

// setTimeoutの秒数（インターバルの時間）
var INTERVAL_SPEED = 2000;

// アスキーコードのミニマムリミット
var MIN_ASCII_CODE = 48;

// アスキーコードのマックスリミット
var MAX_ASCII_CODE = 125;

// 表示する言葉
var TARGET_WORDS = new Array(
  "world",
  "tsujimitsu",
  "javascript",
  "art",
  "design",
  "motion",
  "typo",
  "graphic",
  "thank",
  "you",
  "very",
  "much"
);

// 表示する先（ID）
var DISPLAY_ID = "hello";


/**
 * インターバルを置く．次の文字列へセットする．
 *
 * @param 文字配列 currentWordAsciiCode(array), ナンバー targetWordNumber(int)
 * @return true
 *
 */
function interval(currentWordAsciiCode, targetWordNumber) {
  // 引数targetWordNumberがundefinedなら0を代入する
  if (targetWordNumber == undefined) {
    targetWordNumber = 0;

  // targetWordNumberが長さを超えた場合0に戻す
  } else if (targetWordNumber >= TARGET_WORDS.length) {
    targetWordNumber = 0;
  }

  var targetWordAsciiCode  = new Array();

  var targetWord = TARGET_WORDS[targetWordNumber];

  targetWordAsciiCode  = wordToAsciiCode(targetWord);

  currentWordAsciiCode = regulateArrayLength(currentWordAsciiCode, targetWordAsciiCode);

  wordMatch(currentWordAsciiCode, targetWordAsciiCode, targetWordNumber);

  return true;
}


/**
 * ワードをマッチさせる
 *
 * @param 文字配列 currentWordAsciiCode(array), 文字配列 targetWordAsciiCode(array), ナンバー targetWordNumber(int)
 * @return true
 *
 */
function wordMatch(currentWordAsciiCode, targetWordAsciiCode, targetWordNumber) {
  var resultMatchFlag = 1;

  for (i=0; i<currentWordAsciiCode.length; i++) {
    if (currentWordAsciiCode[i] != targetWordAsciiCode[i]) {

      resultMatchFlag = 0;
      if (currentWordAsciiCode[i] != MAX_ASCII_CODE) {
        currentWordAsciiCode[i]++;
      } else {
        currentWordAsciiCode[i] = MIN_ASCII_CODE;
      }
    }
  }

  // 言葉の表示
  document.getElementById(DISPLAY_ID).innerHTML = asciiCodeToWord(currentWordAsciiCode);

  if (resultMatchFlag) {
    targetWordNumber++;
    setTimeout(interval, INTERVAL_SPEED, currentWordAsciiCode, targetWordNumber);

  } else {
    setTimeout(wordMatch, CHANGE_SPEED, currentWordAsciiCode, targetWordAsciiCode, targetWordNumber);
  }

  return true;

}


/**
 * 引数にセットされた文字列をアスキーコードに変換後，配列に格納し返却．
 *
 * @param 文字列 word(string)
 * @return 処理結果配列データ asciiCode(array)
 *
 */
function wordToAsciiCode(word) {
  var asciiCode = new Array();
  var i = 0;

  for (i=0; i<word.length; i++) {
    asciiCode.push(word.charCodeAt(i));
  }

  return asciiCode;
}


/**
 * 引数にセットされた配列（アスキーコード）を文字列に変換後，変数に格納し返却．
 *
 * @param 配列 asciiCode(array)
 * @return 処理結果配列データ word(string)
 *
 */
function asciiCodeToWord(asciiCode) {
  var word = new String();
  var i = 0;

  for (i=0; i<asciiCode.length; i++) {
    word += String.fromCharCode(asciiCode[i]);
   }

  return word;
}


/**
 * 引数にセットされた配列の長さを比較し，差分の配列を返却．
 * 配列を伸ばす際は，アスキーコードの幅で任意の数字が代入される．
 *
 * @param 文字配列 currentWordAsciiCode(array), 文字配列 targetWordAsciiCode(array)
 * @return 文字配列 currentWordAsciiCode(array)
 *
 */
function regulateArrayLength(currentWordAsciiCode, targetWordAsciiCode) {
  var count = 0;
  var i = 0;

  if (currentWordAsciiCode.length > targetWordAsciiCode.length) {
    count = currentWordAsciiCode.length - targetWordAsciiCode.length;
    for(i=0; i<count; i++) {
      currentWordAsciiCode.pop();
    }

  } else if (targetWordAsciiCode.length > currentWordAsciiCode.length) {
    count = targetWordAsciiCode.length - currentWordAsciiCode.length;
    for(i=0; i<count; i++) {
      currentWordAsciiCode.push(parseInt(getRandomValue(MIN_ASCII_CODE, MAX_ASCII_CODE)));
    }
  }

  return currentWordAsciiCode;
}


/**
 * ランダムな数字を返却する．
 *
 * @param 最小値 min(int), 最大値 max(int)
 * @return ランダム値(float)
 *
 */
function getRandomValue(min, max) {
  return Math.random()*(max-min) + min;
}


// スタート
interval(wordToAsciiCode('a'));
</script>

			</section>
		</article>
	</main>


	<footer role="contentinfo">
		<div class="hr"></div>
		<div class="footer-link">
			
			<a href="https://twitter.com/tsujimitsu" target="_blank">Twitter</a>
			<a href="https://www.facebook.com/tsujimitsu" target="_blank">Facebook</a>
			<a href="https://github.com/tsujimitsu/" target="_blank">GitHub</a>
			
		</div>
		<div class="copyright">Copyright &copy; tsujimitsu All rights reserved.</div>
	</footer>

</div>



<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

</body>
</html>
